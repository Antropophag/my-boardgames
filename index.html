<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Мозаика игр</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.min.css">
<style>
  body { background: #222; color: #fff; font-family: sans-serif; margin: 0; padding: 0; }
  #container { margin: 10px; }
  .game { width: 200px; margin-bottom: 10px; background: #333; border-radius: 10px; overflow: hidden; position: relative; }
  .game img { width: 100%; display: block; }
  .overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 8px; background: rgba(0,0,0,0.7); box-sizing: border-box; }
  .overlay h3 { margin: 0 0 5px; font-size: 16px; }
  .overlay p { margin: 2px 0; font-size: 14px; }
</style>
</head>
<body>

<div id="container" class="grid"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
<script>
// JSON с играми
const data = { "own": [ /* сюда вставь JSON из "own" */ ] };

// Экранирование HTML
function escapeHtml(str) {
  if (!str) return '';
  return str.replace(/[&<>"']/g, s => ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[s]));
}

// Создание карточек игр
function renderGames(containerId, games) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  if (!games || !games.length) {
    container.innerHTML = '<p style="text-align:center;padding:20px">Нет игр.</p>';
    return;
  }

  games.forEach(game => {
    const div = document.createElement('div');
    div.className = 'game';
    const imgSrc = game.image || '';
    div.innerHTML = `
      <img src="${imgSrc}" alt="${escapeHtml(game.name)}">
      <div class="overlay">
        <h3>${escapeHtml(game.name)}</h3>
        <p>Игроки: ${game.minplayers || '?'}–${game.maxplayers || '?'}</p>
        <p>Время: ${game.playingtime || '?'} мин.</p>
        <p>Рейтинг: ${game.average !== undefined ? game.average.toFixed(1) : '—'}</p>
      </div>
    `;
    container.appendChild(div);
  });

  // Masonry
  new Masonry(container, {
    itemSelector: '.game',
    columnWidth: 200,
    gutter: 10
  });
}

// Рендер
renderGames('container', data.own);
</script>

</body>
</html>
